---

The Marketplaceâ€Š-â€ŠTryHackMe Writeup / Walkthrough
The Marketplaceâ€Š-â€ŠTHMÂ Writeup

---

Machine Overview
Machine Name: The Marketplace
Â Target IP: 10.10.xxx.xxx
Â Operating System: Linux
Â Difficulty: Medium â†’ Hard (depends on web exploitation comfort)
This machine primarily focuses on web application logic flaws, client-side exploitation, and container-based privilege escalation.

---

1ï¸âƒ£ Initial Reconnaissance
The engagement began with a full TCP scan to identify exposed services.
ðŸ” NmapÂ Scan
nmap -sC -sV 10.10.xxx.xxx
ðŸ“Œ KeyÂ Findings
PortServiceDetails22SSHOpenSSH 7.6p180HTTPnginx 1.19.232768HTTPNode.js (Express)
Both web services displayed the same applicationâ€Š-â€ŠThe Marketplaceâ€Š-â€Šindicating a reverse proxy or backend service split.

---

2ï¸âƒ£ Web Application Enumeration
Initial inspection of the application showed:
No sensitive information in robots.txt
No credentials or secrets in JavaScript files
No exposed API endpoints
Admin panel visible but protected

At first glance, the application appeared clean.
However, a subtle hint suggested a logic flaw rather than a technical exploit:

"If you think a listing is breaking the rules, you can report it!"

This pointed toward user interactionâ€“based exploitation.

---

3ï¸âƒ£ Authentication & User FlowÂ Analysis
Instead of attacking the login directly, a closer look at the application flow revealed:
Users can sign up
Users can create listings
Listings accept rich text / HTML content

This indicated a possible client-side vulnerability.
A test account was created to fully explore authenticated functionality.

---

4ï¸âƒ£ Stored XSS Discovery
While creating a new marketplace listing, user-controlled input was reflected without proper sanitization.
This confirmed the presence of a Stored Cross-Site Scripting (XSS) vulnerability.
At this stage:
Uploading a web shell directly did not work
Direct RCE was not possible

The attack required chaining vulnerabilities.

---

5ï¸âƒ£ XSS â†’ Account Compromise â†’Â RCE
The stored XSS payload was used to:
Execute JavaScript in the context of another authenticated user
Steal session information
Hijack a higher-privileged account

This ultimately resulted in access to a valid SSH user:
User: jake
SSH access was successfully obtained.
âœ… Initial foothold achieved

---

6ï¸âƒ£ Privilege Escalationâ€Š-â€ŠSudoÂ Abuse
Once logged in as jake, sudo permissions were enumerated:
sudo -l
Result:
Ability to run backup.sh as user michael

The script was writable, allowing command injection.
A reverse shell was injected into the script and executed.
âœ… Shell obtained as michael

---

7ï¸âƒ£ Container EscapeÂ (Docker)
Further enumeration revealed:
The system was running inside a Docker container
Docker-related binaries were accessible

Classic Linux privilege escalation paths failed, confirming containerization.
By abusing Docker capabilities, a container escape was achieved, granting access to the host environment.
âœ… Root access obtained

---

8ï¸âƒ£ Root Access & Completion
Root shell obtained
All flags retrieved
Full compromise confirmed

---

ðŸ§  Key Takeaways

Not every vulnerability is technicalâ€Š-â€Šlogic flaws matter
Always explore authenticated user functionality
Stored XSS can be far more dangerous than reflected XSS
Vulnerability chaining is a critical real-world skill
Docker misconfigurations can completely break isolation
Enumeration > brute force > tools

---

ðŸ“¬ Contact &Â Projects
Email: dakshbaweja20@gmail.com
Â GitHub: https://github.com/sudo0xksh
ðŸš€ Deteroid
Deteroid is a dedicated review platform for bug bounty hunters to share insights, rate programs, and collaborate on cybersecurity findings.
Â Empowering ethical hackers with community-driven intel to hunt bugs smarter.
ðŸ“¸ Instagram: https://www.instagram.com/deteroids/
